

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; sqlalchemy-media 0.15.3 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="sqlalchemy-media 0.15.3 documentation" href="index.html"/>
        <link rel="prev" title="Playing with Analyzers and Validators" href="tutorials/analyzers_and_validators.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> sqlalchemy-media
          

          
          </a>

          
            
            
              <div class="version">
                0.15
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-sqlalchemy_media.attachments">attachments Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#attachment">Attachment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attachmentcollection">AttachmentCollection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attachmentlist">AttachmentList</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attachmentdict">AttachmentDict</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file">File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filelist">FileList</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filedict">FileDict</a></li>
<li class="toctree-l3"><a class="reference internal" href="#baseimage">BaseImage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#image">Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imagelist">ImageList</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thumbnail">Thumbnail</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-sqlalchemy_media.descriptors">descriptors Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basedescriptor">BaseDescriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#streamdescriptor">StreamDescriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#streamcloserdescriptor">StreamCloserDescriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#localfilesystemdescriptor">LocalFileSystemDescriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#urldescriptor">UrlDescriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cgifieldstoragedescriptor">CgiFieldStorageDescriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attachabledescriptor">AttachableDescriptor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-sqlalchemy_media.stores">stores Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#store">Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filesystemstore">FileSystemStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#s3store">S3Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="#os2store">OS2Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sshstore">SSHStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#storemanager">StoreManager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-sqlalchemy_media.processors">processors Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#processor">Processor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyzer">Analyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#magicanalyzer">MagicAnalyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wandanalyzer">WandAnalyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validator">Validator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contenttypevalidator">ContentTypeValidator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imagevalidator">ImageValidator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imageprocessor">ImageProcessor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-sqlalchemy_media.exceptions">exceptions Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-sqlalchemy_media.mimetypes_">Other Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mimetypes-module">mimetypes_ Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optionals-module">optionals Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constants-module">constants Module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sqlalchemy-media</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-sqlalchemy_media.attachments">
<span id="attachments-module"></span><h2>attachments Module<a class="headerlink" href="#module-sqlalchemy_media.attachments" title="Permalink to this headline">¶</a></h2>
<div class="section" id="attachment">
<h3>Attachment<a class="headerlink" href="#attachment" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.Attachment">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">Attachment</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="(in SQLAlchemy v1.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.mutable.MutableDict</span></code></a></p>
<p>The base model for an attached file.
All attachment types will be inherited from this class.</p>
<p>Actually this is an instance of <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="(in SQLAlchemy v1.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.mutable.MutableDict</span></code></a> which inherited from <a class="reference external" href="https://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy_media</span> <span class="kn">import</span> <span class="n">Attachment</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">Attachment</span><span class="p">(</span><span class="n">key1</span><span class="o">=</span><span class="s1">&#39;Value1&#39;</span><span class="p">))</span>
<span class="go">{&#39;key1&#39;: &#39;Value1&#39;}</span>
</pre></div>
</div>
<p>This object should be used inside a <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager" title="sqlalchemy_media.stores.StoreManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoreManager</span></code></a> context.</p>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first">removed <code class="docutils literal notranslate"><span class="pre">__analyzer__</span></code> attribute, using <code class="docutils literal notranslate"><span class="pre">__pre_processors__</span></code> instead.</p>
</li>
<li><p class="first">removed <code class="docutils literal notranslate"><span class="pre">__validate__</span></code> attribute, using <code class="docutils literal notranslate"><span class="pre">__pre_processors__</span></code> instead.</p>
</li>
</ul>
</div>
<div class="versionadded">
<ul>
<span class="versionmodified">New in version 0.9.6: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">reproducible</span></code></p>
</li>
</ul>
</div>
<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.__directory__">
<code class="descname">__directory__</code><em class="property"> = 'attachments'</em><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.__directory__" title="Permalink to this definition">¶</a></dt>
<dd><p>The directory name of the file.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.__prefix__">
<code class="descname">__prefix__</code><em class="property"> = 'attachment'</em><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.__prefix__" title="Permalink to this definition">¶</a></dt>
<dd><p>The prefix to be prepended an the name of the file.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.__max_length__">
<code class="descname">__max_length__</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.__max_length__" title="Permalink to this definition">¶</a></dt>
<dd><p>Limit the file’s maximum size.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.__min_length__">
<code class="descname">__min_length__</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.__min_length__" title="Permalink to this definition">¶</a></dt>
<dd><p>Limit the file’s minimum size.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.__pre_processors__">
<code class="descname">__pre_processors__</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.__pre_processors__" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="#sqlalchemy_media.processors.Processor" title="sqlalchemy_media.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Processor</span></code></a>, to convert, reformat &amp; change contents before storing the attachment.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.__auto_coercion__">
<code class="descname">__auto_coercion__</code><em class="property"> = False</em><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.__auto_coercion__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.__reproducible__">
<code class="descname">__reproducible__</code><em class="property"> = False</em><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.__reproducible__" title="Permalink to this definition">¶</a></dt>
<dd><p>The reproducible of the file.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.__descriptor__">
<code class="descname">__descriptor__</code><em class="property"> = &lt;class 'sqlalchemy_media.descriptors.AttachableDescriptor'&gt;</em><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.__descriptor__" title="Permalink to this definition">¶</a></dt>
<dd><p>It allows to customize the Descriptor.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Attachment.attach">
<code class="descname">attach</code><span class="sig-paren">(</span><em>attachable: Union[str, dict, typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper, typing.Iterable[typing.Iterable[typing.Any]]], content_type: str = None, original_filename: str = None, extension: str = None, store_id: str = None, overwrite: bool = False, suppress_pre_process: bool = False, suppress_validation: bool = False, **kwargs</em><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.attachments.Attachment<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.attach"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.attach" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach a file. if the session is rolled-back, all operations will be rolled-back.
The old file will be deleted after commit, if any.</p>
<p>Workflow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                  <span class="o">+--------+</span>
                  <span class="o">|</span> <span class="n">Start</span>  <span class="o">|</span>
                  <span class="o">+---+----+</span>
                      <span class="o">|</span>
           <span class="o">+----------</span><span class="n">v</span><span class="o">-----------+</span>
           <span class="o">|</span> <span class="n">Wrap</span> <span class="k">with</span> <span class="n">Descriptor</span> <span class="o">&lt;----+</span>
           <span class="o">+----------+-----------+</span>    <span class="o">|</span>
                      <span class="o">|</span>                <span class="o">|</span>
           <span class="o">+----------</span><span class="n">v</span><span class="o">-----------+</span>    <span class="o">|</span>
           <span class="o">|</span> <span class="n">Nothing</span> <span class="ow">or</span> <span class="n">Analyze</span>   <span class="o">|</span>    <span class="o">|</span>
           <span class="o">+----------+-----------+</span>    <span class="o">|</span>
                      <span class="o">|</span>                <span class="o">|</span>
           <span class="o">+----------</span><span class="n">v</span><span class="o">-----------+</span>    <span class="o">|</span>
           <span class="o">|</span> <span class="n">Nothing</span> <span class="ow">or</span> <span class="n">Validate</span>  <span class="o">|</span>    <span class="o">|</span>
           <span class="o">+----------+-----------+</span>    <span class="o">|</span>
                      <span class="o">|</span>                <span class="o">|</span>
           <span class="o">+----------</span><span class="n">v</span><span class="o">-----------+</span>    <span class="o">|</span>
           <span class="o">|</span><span class="n">Nothing</span> <span class="ow">or</span> <span class="n">Pre</span> <span class="n">Process</span><span class="o">+----+</span>
           <span class="o">+------+---------------+</span>
                  <span class="o">|</span>
       <span class="o">+----------+-----------+</span>
       <span class="o">|</span>                      <span class="o">|</span>
<span class="o">+------</span><span class="n">v</span><span class="o">---------+</span>  <span class="o">+---------</span><span class="n">v</span><span class="o">------+</span>
<span class="o">|</span>  <span class="n">Store</span> <span class="ow">in</span> <span class="n">DB</span>   <span class="o">|</span>  <span class="o">|</span><span class="n">Store</span> <span class="n">In</span> <span class="n">Storage</span><span class="o">|</span>
<span class="o">+------+---------+</span>  <span class="o">+---------+------+</span>
       <span class="o">|</span>                      <span class="o">|</span>
       <span class="o">+----------+-----------+</span>
                  <span class="o">|</span>
                  <span class="o">|</span>
              <span class="o">+---</span><span class="n">v</span><span class="o">----+</span>
              <span class="o">|</span> <span class="n">Finish</span> <span class="o">|</span>
              <span class="o">+--------+</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>attachable</strong> – file-like object, filename or URL to attach.</li>
<li><strong>content_type</strong> – If given, the content-detection is suppressed.</li>
<li><strong>original_filename</strong> – Original name of the file, if available, to append to the end of the the filename,
useful for SEO, and readability.</li>
<li><strong>extension</strong> – The file’s extension, is available.else, tries to guess it by content_type</li>
<li><strong>store_id</strong> – The store id to store this file on. Stores must be registered with appropriate id via
<a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.register" title="sqlalchemy_media.stores.StoreManager.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy_media.stores.StoreManager.register()</span></code></a>.</li>
<li><strong>overwrite</strong> – Overwrites the file without changing it’s unique-key and name, useful to prevent broken links.
Currently, when using this option, Rollback function is not available, because the old file
will be overwritten by the given new one.</li>
<li><strong>suppress_pre_process</strong> – When is <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, ignores the pre-processing phase, during attachment.</li>
<li><strong>suppress_validation</strong> – When is <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, ignores the validation phase, during attachment.</li>
<li><strong>kwargs</strong> – Additional metadata to be stored in backend.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.MaximumLengthIsReachedError" title="sqlalchemy_media.exceptions.MaximumLengthIsReachedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">MaximumLengthIsReachedError</span></code></a> and or <a class="reference internal" href="#sqlalchemy_media.exceptions.MinimumLengthIsNotReachedError" title="sqlalchemy_media.exceptions.MinimumLengthIsNotReachedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">MinimumLengthIsNotReachedError</span></code></a> may be raised.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This operation can not be rolled-back, if <code class="docutils literal notranslate"><span class="pre">overwrite=True</span></code> given.</p>
</div>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.1: </span><li><p class="first">This method will return the self. it’s useful to chain method calls on the object within a single line.</p>
</li>
<li><p class="first">Additional <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> are accepted to be stored in database alongside the file’s metadata.</p>
</li>
</ul>
</div>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">suppress_pre_process</span></code> argument.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">suppress_validation</span></code> argument.</p>
</li>
<li><p class="first">pre-processing phase.</p>
</li>
</ul>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.attachments.Attachment.coerce">
<em class="property">classmethod </em><code class="descname">coerce</code><span class="sig-paren">(</span><em>key</em>, <em>value</em><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.attachments.Attachment<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.coerce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.coerce" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts plain dictionary to instance of this class.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict.coerce" title="(in SQLAlchemy v1.2)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.ext.mutable.MutableDict.coerce()</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.content_type">
<code class="descname">content_type</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>file Content-Type</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Attachment.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.attachments.Attachment<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy this object using deepcopy.</p>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.attachments.Attachment.create_from">
<em class="property">classmethod </em><code class="descname">create_from</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.create_from"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.create_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create and attach file with the same action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> – The same as the <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.attach" title="sqlalchemy_media.attachments.Attachment.attach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">attach()</span></code></a></li>
<li><strong>kwargs</strong> – The same as the <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.attach" title="sqlalchemy_media.attachments.Attachment.attach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">attach()</span></code></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The loaded instance of this class.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Attachment.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the file.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This operation can not be roll-backed.So if you want to delete a file, just set it to
<code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> or set it by new <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a> instance, while passed <code class="docutils literal notranslate"><span class="pre">delete_orphan=True</span></code>
in <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager" title="sqlalchemy_media.stores.StoreManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoreManager</span></code></a>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.empty">
<code class="descname">empty</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if file is attached to this object or not. Returns <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code> when a file is loaded on this object via
<a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.attach" title="sqlalchemy_media.attachments.Attachment.attach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">attach()</span></code></a> method or SqlAlchemy db load mechanism, else <code class="xref py py-const docutils literal notranslate"><span class="pre">False.</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.extension">
<code class="descname">extension</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.extension" title="Permalink to this definition">¶</a></dt>
<dd><p>File extension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.filename">
<code class="descname">filename</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>The filename used to store the attachment in the storage with this format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;</span><span class="si">{self.__prefix__}</span><span class="s1">-</span><span class="si">{self.key}{self.suffix}</span><span class="s1">{if self.extension else &#39;&#39;}&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Attachment.get_objects_to_delete">
<code class="descname">get_objects_to_delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.get_objects_to_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.get_objects_to_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the files to be deleted, if the attachment is marked for deletion.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Attachment.get_orphaned_objects">
<code class="descname">get_orphaned_objects</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.get_orphaned_objects"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.get_orphaned_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>this method will be always called by the store when adding the <code class="docutils literal notranslate"><span class="pre">self</span></code> to the orphaned list. so subclasses
of the <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a> has a chance to add other related objects into the orphaned list and schedule it
for delete. for example the <a class="reference internal" href="#sqlalchemy_media.attachments.Image" title="sqlalchemy_media.attachments.Image"><code class="xref py py-class docutils literal notranslate"><span class="pre">Image</span></code></a> class can schedule it’s thumbnails for deletion also.
:return: An iterable of <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a> to mark as orphan.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.0.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Attachment.get_store">
<code class="descname">get_store</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.stores.base.Store<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.get_store"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.get_store" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference internal" href="#sqlalchemy_media.stores.Store" title="sqlalchemy_media.stores.Store"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.stores.Store</span></code></a> instance, which this file is stored on.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.key">
<code class="descname">key</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Unique key for tracking this attachment. it will be generated during attachment process in
<a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.attach" title="sqlalchemy_media.attachments.Attachment.attach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">attach()</span></code></a> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">Hashable</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.length">
<code class="descname">length</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.length" title="Permalink to this definition">¶</a></dt>
<dd><p>The length of the attached file in bytes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Attachment.locate">
<code class="descname">locate</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Attachment.locate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.locate" title="Permalink to this definition">¶</a></dt>
<dd><p>Locates the file url.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.original_filename">
<code class="descname">original_filename</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.original_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Original file name, it may be provided by user within <code class="xref py py-attr docutils literal notranslate"><span class="pre">cgi.FieldStorage.filename</span></code>, url or Physical
filename.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.path">
<code class="descname">path</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative Path of the file used to store and locate the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.reproducible">
<code class="descname">reproducible</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.reproducible" title="Permalink to this definition">¶</a></dt>
<dd><p>The reproducible of the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.store_id">
<code class="descname">store_id</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.store_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the id of the store used to put this file on.</p>
<p>Stores must be registered with appropriate id via <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.register" title="sqlalchemy_media.stores.StoreManager.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StoreManager.register()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.suffix">
<code class="descname">suffix</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>The same as the <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.original_filename" title="sqlalchemy_media.attachments.Attachment.original_filename"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.Attachment.original_filename()</span></code></a> plus a leading minus(-)
If available, else empty string (‘’) will be returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Attachment.timestamp">
<code class="descname">timestamp</code><a class="headerlink" href="#sqlalchemy_media.attachments.Attachment.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>The unix-time of the attachment creation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="attachmentcollection">
<h3>AttachmentCollection<a class="headerlink" href="#attachmentcollection" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.AttachmentCollection">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">AttachmentCollection</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentCollection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mixin to make a mutable iterator as a collection of <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a>.</p>
<dl class="attribute">
<dt id="sqlalchemy_media.attachments.AttachmentCollection.__item_type__">
<code class="descname">__item_type__</code><em class="property"> = &lt;class 'sqlalchemy_media.attachments.Attachment'&gt;</em><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentCollection.__item_type__" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of items</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="attachmentlist">
<h3>AttachmentList<a class="headerlink" href="#attachmentlist" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.AttachmentList">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">AttachmentList</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.AttachmentCollection" title="sqlalchemy_media.attachments.AttachmentCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.AttachmentCollection</span></code></a>, <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableList" title="(in SQLAlchemy v1.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.mutable.MutableList</span></code></a></p>
<p>Used to create a collection of <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyList</span><span class="p">(</span><span class="n">AttachmentList</span><span class="p">):</span>
    <span class="n">__item_type__</span> <span class="o">=</span> <span class="n">MyAttachment</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;person&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">files</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">MyList</span><span class="o">.</span><span class="n">as_mutable</span><span class="p">(</span><span class="n">Json</span><span class="p">))</span>

<span class="n">me</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="n">me</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="n">MyList</span><span class="p">()</span>
<span class="n">me</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">MyAttachment</span><span class="o">.</span><span class="n">create_from</span><span class="p">(</span><span class="n">any_file</span><span class="p">))</span>
</pre></div>
</div>
<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentList.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>object</em><span class="sig-paren">)</span> &#x2192; None -- append object to end<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList.append" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentList.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None -- remove all items from L<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.attachments.AttachmentList.coerce">
<em class="property">classmethod </em><code class="descname">coerce</code><span class="sig-paren">(</span><em>index</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList.coerce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList.coerce" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert plain list to instance of this class.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentList.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>iterable</em><span class="sig-paren">)</span> &#x2192; None -- extend list by appending elements from the iterable<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList.extend" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentList.insert">
<code class="descname">insert</code><span class="sig-paren">(</span><em>i</em>, <em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList.insert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>L.insert(index, object) – insert object before index</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentList.observe_item">
<code class="descname">observe_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList.observe_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList.observe_item" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple monkeypatch to instruct the children to notify the parent if contents are changed:</p>
<p>From <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableList">sqlalchemy mutable documentation:</a></p>
<blockquote>
<div>Note that MutableList does not apply mutable tracking to the values themselves inside the list. Therefore
it is not a sufficient solution for the use case of tracking deep changes to a recursive mutable structure,
such as a JSON structure. To support this use case, build a subclass of MutableList that provides
appropriate coercion to the values placed in the dictionary so that they too are “mutable”, and emit events
up to their parent structure.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> – The item to observe</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentList.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><span class="optional">[</span><em>index</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; item -- remove and return item at index (default last).<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises IndexError if list is empty or index is out of range.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentList.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span> &#x2192; None -- remove first occurrence of value.<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentList.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentList.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises ValueError if the value is not present.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="attachmentdict">
<h3>AttachmentDict<a class="headerlink" href="#attachmentdict" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.AttachmentDict">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">AttachmentDict</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.AttachmentCollection" title="sqlalchemy_media.attachments.AttachmentCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.AttachmentCollection</span></code></a>, <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="(in SQLAlchemy v1.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.mutable.MutableDict</span></code></a></p>
<p>Used to create a dictionary of <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyDict</span><span class="p">(</span><span class="n">AttachmentDict</span><span class="p">):</span>
    <span class="n">__item_type__</span> <span class="o">=</span> <span class="n">MyAttachment</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;person&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">files</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">MyDict</span><span class="o">.</span><span class="n">as_mutable</span><span class="p">(</span><span class="n">Json</span><span class="p">))</span>

<span class="n">me</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="n">me</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="n">MyDict</span><span class="p">()</span>
<span class="n">me</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;original&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyAttachment</span><span class="o">.</span><span class="n">create_from</span><span class="p">(</span><span class="n">any_file</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentDict.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None.  Remove all items from D.<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentDict.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentDict.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.attachments.AttachmentDict.coerce">
<em class="property">classmethod </em><code class="descname">coerce</code><span class="sig-paren">(</span><em>index</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentDict.coerce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentDict.coerce" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert plain dictionary to instance of this class.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentDict.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; v, remove specified key and return the corresponding value.<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentDict.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentDict.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>If key is not found, d is returned if given, otherwise KeyError is raised</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentDict.popitem">
<code class="descname">popitem</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; (k, v), remove and return some (key, value) pair as a<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentDict.popitem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentDict.popitem" title="Permalink to this definition">¶</a></dt>
<dd><p>2-tuple; but raise KeyError if D is empty.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentDict.setdefault">
<code class="descname">setdefault</code><span class="sig-paren">(</span><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; D.get(k,d), also set D[k]=d if k not in D<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentDict.setdefault"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentDict.setdefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.AttachmentDict.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="optional">[</span><em>E</em>, <span class="optional">]</span><em>**F</em><span class="sig-paren">)</span> &#x2192; None.  Update D from dict/iterable E and F.<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#AttachmentDict.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.AttachmentDict.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E is present and has a .keys() method, then does:  for k in E: D[k] = E[k]
If E is present and lacks a .keys() method, then does:  for k, v in E: D[k] = v
In either case, this is followed by: for k in F:  D[k] = F[k]</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="file">
<h3>File<a class="headerlink" href="#file" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.File">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">File</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#File"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.Attachment</span></code></a></p>
<p>Representing an attached file. Normally if you want to store any file, this class is the best choice.</p>
<dl class="attribute">
<dt id="sqlalchemy_media.attachments.File.__directory__">
<code class="descname">__directory__</code><em class="property"> = 'files'</em><a class="headerlink" href="#sqlalchemy_media.attachments.File.__directory__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.File.__prefix__">
<code class="descname">__prefix__</code><em class="property"> = 'file'</em><a class="headerlink" href="#sqlalchemy_media.attachments.File.__prefix__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.File.__max_length__">
<code class="descname">__max_length__</code><em class="property"> = 2097152</em><a class="headerlink" href="#sqlalchemy_media.attachments.File.__max_length__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.File.__min_length__">
<code class="descname">__min_length__</code><em class="property"> = 0</em><a class="headerlink" href="#sqlalchemy_media.attachments.File.__min_length__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="filelist">
<h3>FileList<a class="headerlink" href="#filelist" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.FileList">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">FileList</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#FileList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.FileList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.AttachmentList" title="sqlalchemy_media.attachments.AttachmentList"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.AttachmentList</span></code></a></p>
<p>Equivalent to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FileList</span><span class="p">(</span><span class="n">AttachmentList</span><span class="p">):</span>
    <span class="n">__item_type__</span> <span class="o">=</span> <span class="n">File</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="sqlalchemy_media.attachments.FileList.__item_type__">
<code class="descname">__item_type__</code><em class="property"> = &lt;class 'sqlalchemy_media.attachments.File'&gt;</em><a class="headerlink" href="#sqlalchemy_media.attachments.FileList.__item_type__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="filedict">
<h3>FileDict<a class="headerlink" href="#filedict" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.FileDict">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">FileDict</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#FileDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.FileDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.AttachmentDict" title="sqlalchemy_media.attachments.AttachmentDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.AttachmentDict</span></code></a></p>
<p>Equivalent to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FileDict</span><span class="p">(</span><span class="n">AttachmentDict</span><span class="p">):</span>
    <span class="n">__item_type__</span> <span class="o">=</span> <span class="n">File</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="sqlalchemy_media.attachments.FileDict.__item_type__">
<code class="descname">__item_type__</code><em class="property"> = &lt;class 'sqlalchemy_media.attachments.File'&gt;</em><a class="headerlink" href="#sqlalchemy_media.attachments.FileDict.__item_type__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="baseimage">
<h3>BaseImage<a class="headerlink" href="#baseimage" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.BaseImage">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">BaseImage</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#BaseImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.BaseImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.File" title="sqlalchemy_media.attachments.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.File</span></code></a></p>
<p>Base class for all images.</p>
<dl class="method">
<dt id="sqlalchemy_media.attachments.BaseImage.attach">
<code class="descname">attach</code><span class="sig-paren">(</span><em>*args</em>, <em>dimension: Tuple[int</em>, <em>int] = None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#BaseImage.attach"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.BaseImage.attach" title="Permalink to this definition">¶</a></dt>
<dd><p>A new overload for <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.attach" title="sqlalchemy_media.attachments.Attachment.attach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Attachment.attach()</span></code></a>, which accepts one additional argument: <code class="docutils literal notranslate"><span class="pre">dimension</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> – The same as the: <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.attach" title="sqlalchemy_media.attachments.Attachment.attach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Attachment.attach()</span></code></a>.</li>
<li><strong>dimension</strong> – Image (width, height).</li>
<li><strong>kwargs</strong> – The same as the: <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.attach" title="sqlalchemy_media.attachments.Attachment.attach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Attachment.attach()</span></code></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The same as the: <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment.attach" title="sqlalchemy_media.attachments.Attachment.attach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Attachment.attach()</span></code></a>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="image">
<h3>Image<a class="headerlink" href="#image" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.Image">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">Image</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Image" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.BaseImage" title="sqlalchemy_media.attachments.BaseImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.BaseImage</span></code></a></p>
<p>Equivalent to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">Attachment</span><span class="p">):</span>
    <span class="n">__directory__</span> <span class="o">=</span> <span class="s1">&#39;images&#39;</span>
    <span class="n">__prefix__</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span>
    <span class="n">__max_length__</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">MB</span>
    <span class="n">__min_length__</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">KB</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Image.__directory__">
<code class="descname">__directory__</code><em class="property"> = 'images'</em><a class="headerlink" href="#sqlalchemy_media.attachments.Image.__directory__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Image.__prefix__">
<code class="descname">__prefix__</code><em class="property"> = 'image'</em><a class="headerlink" href="#sqlalchemy_media.attachments.Image.__prefix__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Image.__max_length__">
<code class="descname">__max_length__</code><em class="property"> = 2097152</em><a class="headerlink" href="#sqlalchemy_media.attachments.Image.__max_length__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Image.__min_length__">
<code class="descname">__min_length__</code><em class="property"> = 4096</em><a class="headerlink" href="#sqlalchemy_media.attachments.Image.__min_length__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Image.generate_thumbnail">
<code class="descname">generate_thumbnail</code><span class="sig-paren">(</span><em>width: int = None</em>, <em>height: int = None</em>, <em>ratio: float = None</em>, <em>ratio_precision: int = 5</em><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.attachments.Thumbnail<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Image.generate_thumbnail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Image.generate_thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 0.3.</span></p>
</div>
<p>Generates and stores a thumbnail with the given arguments.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If none or more than one of the <code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code> and or <code class="docutils literal notranslate"><span class="pre">ratio</span></code> are given, <a class="reference external" href="https://docs.python.org/3.5/library/exceptions.html#ValueError" title="(in Python v3.5)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>
will be raised.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>width</strong> – The width of the thumbnail.</li>
<li><strong>height</strong> – The Height of the thumbnail.</li>
<li><strong>ratio</strong> – The coefficient to reduce, Must be less than <code class="docutils literal notranslate"><span class="pre">1.0</span></code>.</li>
<li><strong>ratio_precision</strong> – Number of digits after the decimal point of the <code class="docutils literal notranslate"><span class="pre">ratio</span></code> argument to tune thumbnail
lookup precision. default: 2.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the Newly generated <a class="reference internal" href="#sqlalchemy_media.attachments.Thumbnail" title="sqlalchemy_media.attachments.Thumbnail"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thumbnail</span></code></a> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Image.get_objects_to_delete">
<code class="descname">get_objects_to_delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Image.get_objects_to_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Image.get_objects_to_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the files to be deleted, if the attachment is marked for deletion.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Image.get_orphaned_objects">
<code class="descname">get_orphaned_objects</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Image.get_orphaned_objects"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Image.get_orphaned_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark thumbnails for deletion when the <a class="reference internal" href="#sqlalchemy_media.attachments.Image" title="sqlalchemy_media.attachments.Image"><code class="xref py py-class docutils literal notranslate"><span class="pre">Image</span></code></a> is being deleted.
:return: An iterable of <a class="reference internal" href="#sqlalchemy_media.attachments.Thumbnail" title="sqlalchemy_media.attachments.Thumbnail"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thumbnail</span></code></a> to mark as orphan.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.0.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.attachments.Image.get_thumbnail">
<code class="descname">get_thumbnail</code><span class="sig-paren">(</span><em>width: int = None</em>, <em>height: int = None</em>, <em>ratio: float = None</em>, <em>ratio_precision: int = 2</em>, <em>auto_generate: bool = False</em><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.attachments.Thumbnail<a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Image.get_thumbnail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Image.get_thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 0.3.</span></p>
</div>
<p>Search for the thumbnail with given arguments, if <code class="docutils literal notranslate"><span class="pre">auto_generate</span></code> is <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#False" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>, the
<a class="reference internal" href="#sqlalchemy_media.exceptions.ThumbnailIsNotAvailableError" title="sqlalchemy_media.exceptions.ThumbnailIsNotAvailableError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ThumbnailIsNotAvailableError</span></code></a> will be raised, else tries to call the <a class="reference internal" href="#sqlalchemy_media.attachments.Image.generate_thumbnail" title="sqlalchemy_media.attachments.Image.generate_thumbnail"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate_thumbnail()</span></code></a> to create
a new one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>width</strong> – Width of the thumbnail to search for.</li>
<li><strong>height</strong> – Height of the thumbnail to search for.</li>
<li><strong>ratio</strong> – Ratio of the thumbnail to search for.</li>
<li><strong>ratio_precision</strong> – Number of digits after the decimal point of the <code class="docutils literal notranslate"><span class="pre">ratio</span></code> argument to tune thumbnail
lookup precision. default: 2.</li>
<li><strong>auto_generate</strong> – If <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, tries to generate a new thumbnail.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#sqlalchemy_media.attachments.Thumbnail" title="sqlalchemy_media.attachments.Thumbnail"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thumbnail</span></code></a> instance.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">if <code class="docutils literal notranslate"><span class="pre">auto_generate</span></code> is <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, you have to commit the session, to store the generated
thumbnails.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.attachments.Image.thumbnails">
<code class="descname">thumbnails</code><a class="headerlink" href="#sqlalchemy_media.attachments.Image.thumbnails" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">List[Tuple[int,</span> <span class="pre">int,</span> <span class="pre">float,</span> <span class="pre">Thumbnail]]</span></code>, to hold thumbnails.</p>
<p>You may use <a class="reference internal" href="#sqlalchemy_media.attachments.Image.generate_thumbnail" title="sqlalchemy_media.attachments.Image.generate_thumbnail"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate_thumbnail()</span></code></a> and or <a class="reference internal" href="#sqlalchemy_media.attachments.Image.get_thumbnail" title="sqlalchemy_media.attachments.Image.get_thumbnail"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_thumbnail()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">auto_generate=True</span></code> to fill it.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="imagelist">
<h3>ImageList<a class="headerlink" href="#imagelist" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.ImageList">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">ImageList</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#ImageList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.ImageList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.AttachmentList" title="sqlalchemy_media.attachments.AttachmentList"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.AttachmentList</span></code></a></p>
<p>Used to create a collection of :class:<a href="#id1"><span class="problematic" id="id2">`</span></a>.Image`es</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.0.</span></p>
</div>
<dl class="attribute">
<dt id="sqlalchemy_media.attachments.ImageList.__item_type__">
<code class="descname">__item_type__</code><em class="property"> = &lt;class 'sqlalchemy_media.attachments.Image'&gt;</em><a class="headerlink" href="#sqlalchemy_media.attachments.ImageList.__item_type__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="thumbnail">
<h3>Thumbnail<a class="headerlink" href="#thumbnail" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.attachments.Thumbnail">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.attachments.</code><code class="descname">Thumbnail</code><a class="reference internal" href="_modules/sqlalchemy_media/attachments.html#Thumbnail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.attachments.Thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.attachments.BaseImage" title="sqlalchemy_media.attachments.BaseImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.attachments.BaseImage</span></code></a></p>
<p>Representing an image thumbnail.</p>
<p>You may use <a class="reference internal" href="#sqlalchemy_media.attachments.Image.generate_thumbnail" title="sqlalchemy_media.attachments.Image.generate_thumbnail"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate_thumbnail()</span></code></a> and or <a class="reference internal" href="#sqlalchemy_media.attachments.Image.get_thumbnail" title="sqlalchemy_media.attachments.Image.get_thumbnail"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_thumbnail()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">auto_generate=True</span></code> to get one.</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-sqlalchemy_media.descriptors">
<span id="descriptors-module"></span><h2>descriptors Module<a class="headerlink" href="#module-sqlalchemy_media.descriptors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basedescriptor">
<h3>BaseDescriptor<a class="headerlink" href="#basedescriptor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.descriptors.</code><code class="descname">BaseDescriptor</code><span class="sig-paren">(</span><em>min_length: int = None</em>, <em>max_length: int = None</em>, <em>content_type: str = None</em>, <em>content_length: int = None</em>, <em>extension: str = None</em>, <em>original_filename: str = None</em>, <em>header_buffer_size=1024</em>, <em>reproducible: bool = False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Abstract base class for all descriptors. Instance of this class is a file-like object.</p>
<p>Descriptors are used to get some primitive information from an attachable(file-like object, filename or URI) and
also allow seeking over underlying file-object. users may not be using this class directly.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.descriptors.AttachableDescriptor" title="sqlalchemy_media.descriptors.AttachableDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttachableDescriptor</span></code></a> to know how to use it.</p>
</div>
<div class="versionadded">
<ul>
<span class="versionmodified">New in version 0.5: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">min_length</span></code> argument</p>
</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>min_length</strong> – Maximum allowed file size.</li>
<li><strong>max_length</strong> – Maximum allowed file size.</li>
<li><strong>content_type</strong> – The file’s mimetype to suppress the mimetype detection.</li>
<li><strong>content_length</strong> – The length of the file in bytes, if available. Some descriptors like <a class="reference internal" href="#sqlalchemy_media.descriptors.UrlDescriptor" title="sqlalchemy_media.descriptors.UrlDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlDescriptor</span></code></a>
are providing this keyword argument.</li>
<li><strong>extension</strong> – The file’s extension to suppress guessing it.</li>
<li><strong>original_filename</strong> – Original filename, useful to detect <cite>content_type</cite> and or <cite>extension</cite>.</li>
<li><strong>kwargs</strong> – Additional keyword arguments to set as attribute on descriptor instance.</li>
<li><strong>header_buffer_size</strong> – Amount of bytes to read and buffer from underlying file-like object for analysis purpose
if file-like object is not seekable.</li>
<li><strong>reproducible</strong> – The reproducible of the file-like objects.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor._tell_source">
<code class="descname">_tell_source</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor._tell_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor._tell_source" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and return the underlying file-object’s current position.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor._read_source">
<code class="descname">_read_source</code><span class="sig-paren">(</span><em>size: int</em><span class="sig-paren">)</span> &#x2192; bytes<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor._read_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor._read_source" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and read from underlying file-object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>size</strong> – Amount of bytes to read.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>check_length=True</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the underlying file-object. and check for <code class="docutils literal notranslate"><span class="pre">min_length</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>check_length</strong> – Check the minimum length of the stream and <code class="xref py py-class docutils literal notranslate"><span class="pre">MinimumLengthIsNotReachedError</span></code> mar
raised during close. default is <cite>True</cite>.</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<ul>
<span class="versionmodified">New in version 0.8: </span><li><p class="first"><cite>check_length</cite></p>
</li>
</ul>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.content_type">
<code class="descname">content_type</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Content type of the underlying file-object.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.extension">
<code class="descname">extension</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.extension" title="Permalink to this definition">¶</a></dt>
<dd><p>Extension of the underlying file-object.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.get_header_buffer">
<code class="descname">get_header_buffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bytes<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor.get_header_buffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.get_header_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the amount of <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor.header_buffer_size" title="sqlalchemy_media.descriptors.BaseDescriptor.header_buffer_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">header_buffer_size</span></code></a> from the beginning of the underlying file-object. this method
should be called many times before the <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor.read" title="sqlalchemy_media.descriptors.BaseDescriptor.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a> method is called on non-seekable descriptors.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <a class="reference internal" href="#sqlalchemy_media.exceptions.DescriptorOperationError" title="sqlalchemy_media.exceptions.DescriptorOperationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DescriptorOperationError</span></code></a> will be raised if this method is called after calling the
<a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor.read" title="sqlalchemy_media.descriptors.BaseDescriptor.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a>. This situation is only happened on non-seekable descriptors.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor.seekable" title="sqlalchemy_media.descriptors.BaseDescriptor.seekable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">seekable()</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.header">
<code class="descname">header</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.header" title="Permalink to this definition">¶</a></dt>
<dd><p>Buffer to store cached header on non-seekable file-like objects.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.header_buffer_size">
<code class="descname">header_buffer_size</code><em class="property"> = 1024</em><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.header_buffer_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Amount of bytes to cache from header on non-seekable file-like objects.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.original_filename">
<code class="descname">original_filename</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.original_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Original filename of the underlying file-object.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>size: int = None</em><span class="sig-paren">)</span> &#x2192; bytes<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read from the underlying file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>size</strong> – Amount of bytes ro read.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.read_source">
<code class="descname">read_source</code><span class="sig-paren">(</span><em>size: int</em><span class="sig-paren">)</span> &#x2192; bytes<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor.read_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.read_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to read from underlying file-object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>size</strong> – Amount of bytes to read.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.reproducible">
<code class="descname">reproducible</code><em class="property"> = False</em><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.reproducible" title="Permalink to this definition">¶</a></dt>
<dd><p>The reproducible of the file-like objects.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.seek">
<code class="descname">seek</code><span class="sig-paren">(</span><em>position: int</em>, <em>whence: int = 0</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor.seek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.seek" title="Permalink to this definition">¶</a></dt>
<dd><p>Seek the file at the given position.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference external" href="https://docs.python.org/3.5/library/io.html#io.UnsupportedOperation" title="(in Python v3.5)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">io.UnsupportedOperation</span></code></a> will be raised if the underlying file-object is not</p>
</div>
<p><a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor.seekable" title="sqlalchemy_media.descriptors.BaseDescriptor.seekable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">seekable()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>position</strong> – the position to seek on.</li>
<li><strong>whence</strong> – optional whence argument.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.seekable">
<code class="descname">seekable</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor.seekable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.seekable" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and return <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> if the underlying file-object is seekable.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.tell">
<code class="descname">tell</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor.tell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.tell" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current position of the file-like object. Even if the underlying file-object is not <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor.seekable" title="sqlalchemy_media.descriptors.BaseDescriptor.seekable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">seekable()</span></code></a>,
this method should return the current position which counted internally.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.BaseDescriptor.tell_source">
<code class="descname">tell_source</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#BaseDescriptor.tell_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.BaseDescriptor.tell_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the underlying file-object’s current position. even if the underlying file-object is not
<a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor.seekable" title="sqlalchemy_media.descriptors.BaseDescriptor.seekable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">seekable()</span></code></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="streamdescriptor">
<h3>StreamDescriptor<a class="headerlink" href="#streamdescriptor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.descriptors.StreamDescriptor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.descriptors.</code><code class="descname">StreamDescriptor</code><span class="sig-paren">(</span><em>stream: Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper], **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#StreamDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.descriptors.BaseDescriptor</span></code></a></p>
<p>This class is used for describing a file-like object. so it’s just a proxy for file-like objects.
The underlying file-object is not meant to be closed after calling the <a class="reference internal" href="#sqlalchemy_media.descriptors.StreamDescriptor.close" title="sqlalchemy_media.descriptors.StreamDescriptor.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>stream</strong> – File-like object to wrap.</li>
<li><strong>kwargs</strong> – the same as the <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sqlalchemy_media.descriptors.StreamDescriptor.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>**kw</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#StreamDescriptor.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamDescriptor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>We are not closing the file-like object here, because we’ve not opened it.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.descriptors.StreamDescriptor.filename">
<code class="descname">filename</code><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamDescriptor.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the filename of the backend file-like object is available.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.StreamDescriptor.prepare_to_read">
<code class="descname">prepare_to_read</code><span class="sig-paren">(</span><em>backend: str = 'temp'</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#StreamDescriptor.prepare_to_read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamDescriptor.prepare_to_read" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
<p>If the underlying file-object is not seekable, tries to store the underlying non-seekable file-like object as an
instance of <a class="reference external" href="https://docs.python.org/3.5/library/io.html#io.BytesIO" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BytesIO</span></code></a>, <a class="reference external" href="https://docs.python.org/3.5/library/tempfile.html#tempfile.NamedTemporaryFile" title="(in Python v3.5)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tempfile.NamedTemporaryFile</span></code></a> and <a class="reference external" href="https://docs.python.org/3.5/library/tempfile.html#tempfile.TemporaryFile" title="(in Python v3.5)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tempfile.TemporaryFile</span></code></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Anyway, this method will seeks the descriptor to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If any physical file is created during this operation, This will be deleted after the
<a class="reference internal" href="#sqlalchemy_media.descriptors.StreamDescriptor.close" title="sqlalchemy_media.descriptors.StreamDescriptor.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> has been called.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.DescriptorOperationError" title="sqlalchemy_media.exceptions.DescriptorOperationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DescriptorOperationError</span></code></a> may be raised, if the current position is greater than zero <code class="docutils literal notranslate"><span class="pre">0</span></code>,
and also if called on a seekable instance.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">file</span></code> option is also a temp file but file is guaranteed to have a visible name in the file
system (on Unix, the directory entry is not unlinked). filename will be
retrieved by the <a class="reference internal" href="#sqlalchemy_media.descriptors.StreamDescriptor.filename" title="sqlalchemy_media.descriptors.StreamDescriptor.filename"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filename</span></code></a>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>backend</strong> – Available choices are: <code class="docutils literal notranslate"><span class="pre">memory</span></code>, <code class="docutils literal notranslate"><span class="pre">file</span></code> and <code class="docutils literal notranslate"><span class="pre">temp</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.StreamDescriptor.replace">
<code class="descname">replace</code><span class="sig-paren">(</span><em>attachable: [&lt;class '_io.BytesIO'&gt;, &lt;class '_io.FileIO'&gt;], position=None, **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#StreamDescriptor.replace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamDescriptor.replace" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
<p>Replace the underlying file-object with a seekable one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>attachable</strong> – A seekable file-object.</li>
<li><strong>position</strong> – Position of the new seekable file-object. if <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a>, position will be preserved.</li>
<li><strong>kwargs</strong> – the same as the <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.StreamDescriptor.seek">
<code class="descname">seek</code><span class="sig-paren">(</span><em>position: int</em>, <em>whence: int = 0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#StreamDescriptor.seek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamDescriptor.seek" title="Permalink to this definition">¶</a></dt>
<dd><p>Seek the file at the given position.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference external" href="https://docs.python.org/3.5/library/io.html#io.UnsupportedOperation" title="(in Python v3.5)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">io.UnsupportedOperation</span></code></a> will be raised if the underlying file-object is not</p>
</div>
<p><a class="reference internal" href="#sqlalchemy_media.descriptors.StreamDescriptor.seekable" title="sqlalchemy_media.descriptors.StreamDescriptor.seekable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">seekable()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>position</strong> – the position to seek on.</li>
<li><strong>whence</strong> – optional whence argument.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.descriptors.StreamDescriptor.seekable">
<code class="descname">seekable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#StreamDescriptor.seekable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamDescriptor.seekable" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and return <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> if the underlying file-object is seekable.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="streamcloserdescriptor">
<h3>StreamCloserDescriptor<a class="headerlink" href="#streamcloserdescriptor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.descriptors.StreamCloserDescriptor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.descriptors.</code><code class="descname">StreamCloserDescriptor</code><span class="sig-paren">(</span><em>stream: Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper], **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#StreamCloserDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamCloserDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.descriptors.StreamDescriptor" title="sqlalchemy_media.descriptors.StreamDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.descriptors.StreamDescriptor</span></code></a></p>
<p>The same as the <a class="reference internal" href="#sqlalchemy_media.descriptors.StreamDescriptor" title="sqlalchemy_media.descriptors.StreamDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamDescriptor</span></code></a>, the only difference is that this class tries to close the file-like
object after calling the <a class="reference internal" href="#sqlalchemy_media.descriptors.StreamCloserDescriptor.close" title="sqlalchemy_media.descriptors.StreamCloserDescriptor.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> method.</p>
<dl class="method">
<dt id="sqlalchemy_media.descriptors.StreamCloserDescriptor.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>**kw</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#StreamCloserDescriptor.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.StreamCloserDescriptor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden to close the underlying file-object.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="localfilesystemdescriptor">
<h3>LocalFileSystemDescriptor<a class="headerlink" href="#localfilesystemdescriptor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.descriptors.LocalFileSystemDescriptor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.descriptors.</code><code class="descname">LocalFileSystemDescriptor</code><span class="sig-paren">(</span><em>filename: str</em>, <em>original_filename: str = None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#LocalFileSystemDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.LocalFileSystemDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.descriptors.StreamCloserDescriptor" title="sqlalchemy_media.descriptors.StreamCloserDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.descriptors.StreamCloserDescriptor</span></code></a></p>
<p>Representing a file on the local file system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – The filename on the local storage to open for reading.</li>
<li><strong>kwargs</strong> – the same as the <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <cite>filename</cite> will be passed as <cite>original_filename</cite> to the parent class.</p>
</div>
</dd></dl>

</div>
<div class="section" id="urldescriptor">
<h3>UrlDescriptor<a class="headerlink" href="#urldescriptor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.descriptors.UrlDescriptor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.descriptors.</code><code class="descname">UrlDescriptor</code><span class="sig-paren">(</span><em>uri: str</em>, <em>content_type: str = None</em>, <em>original_filename: str = None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#UrlDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.UrlDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.descriptors.StreamCloserDescriptor" title="sqlalchemy_media.descriptors.StreamCloserDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.descriptors.StreamCloserDescriptor</span></code></a></p>
<p>Open a remote resource with <a class="reference external" href="https://docs.python.org/3.5/library/urllib.html#module-urllib" title="(in Python v3.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib</span></code></a> and pass the <cite>content_type</cite> and <cite>content_length</cite> to the parent class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>uri</strong> – The uri to open.</li>
<li><strong>kwargs</strong> – the same as the <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <cite>uri</cite> will be passed as <cite>original_filename</cite> to the parent class, if the <cite>original_filename</cite> is
<a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
</div>
</dd></dl>

</div>
<div class="section" id="cgifieldstoragedescriptor">
<h3>CgiFieldStorageDescriptor<a class="headerlink" href="#cgifieldstoragedescriptor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.descriptors.CgiFieldStorageDescriptor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.descriptors.</code><code class="descname">CgiFieldStorageDescriptor</code><span class="sig-paren">(</span><em>storage: cgi.FieldStorage</em>, <em>content_type: str = None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#CgiFieldStorageDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.CgiFieldStorageDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.descriptors.StreamCloserDescriptor" title="sqlalchemy_media.descriptors.StreamCloserDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.descriptors.StreamCloserDescriptor</span></code></a></p>
<p>Describes a <code class="xref py py-class docutils literal notranslate"><span class="pre">cgi.FieldStorage</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>storage</strong> – The <code class="xref py py-class docutils literal notranslate"><span class="pre">cgi.FieldStorage</span></code> instance to be described.</li>
<li><strong>kwargs</strong> – the same as the <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="attachabledescriptor">
<h3>AttachableDescriptor<a class="headerlink" href="#attachabledescriptor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.descriptors.AttachableDescriptor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.descriptors.</code><code class="descname">AttachableDescriptor</code><span class="sig-paren">(</span><em>min_length: int = None</em>, <em>max_length: int = None</em>, <em>content_type: str = None</em>, <em>content_length: int = None</em>, <em>extension: str = None</em>, <em>original_filename: str = None</em>, <em>header_buffer_size=1024</em>, <em>reproducible: bool = False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/descriptors.html#AttachableDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.descriptors.AttachableDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.descriptors.BaseDescriptor</span></code></a></p>
<p>This is an abstract factory for descriptors based on the first argument</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy_media</span> <span class="kn">import</span> <span class="n">AttachableDescriptor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">AttachableDescriptor</span><span class="p">(</span><span class="s1">&#39;index.rst&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">descriptor</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">descriptor</span><span class="p">))</span>
<span class="go">&lt;class &#39;sqlalchemy_media.descriptors.LocalFileSystemDescriptor&#39;&gt;</span>
</pre></div>
</div>
<p>So this callable, should determine the appropriate descriptor and return an instance of it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>attachable</strong> – filename, uri or file-like object</li>
<li><strong>kwargs</strong> – the same as the <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-sqlalchemy_media.stores">
<span id="stores-module"></span><h2>stores Module<a class="headerlink" href="#module-sqlalchemy_media.stores" title="Permalink to this headline">¶</a></h2>
<div class="section" id="store">
<h3>Store<a class="headerlink" href="#store" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.stores.Store">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.stores.</code><code class="descname">Store</code><a class="reference internal" href="_modules/sqlalchemy_media/stores/base.html#Store"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.Store" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The abstract base class for all stores.</p>
<dl class="method">
<dt id="sqlalchemy_media.stores.Store.cleanup">
<code class="descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/base.html#Store.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.Store.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>In derived class should cleanup all dirty stuff created while storing and deleting file.
If not overridden, no error will be raised.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.cleanup" title="sqlalchemy_media.stores.StoreManager.cleanup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StoreManager.cleanup()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.Store.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>filename: str</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores/base.html#Store.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.Store.delete" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and deletes the given file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – The filename to delete</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.Store.locate">
<code class="descname">locate</code><span class="sig-paren">(</span><em>attachment</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/sqlalchemy_media/stores/base.html#Store.locate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.Store.locate" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>If overridden in the inherited class, should locates the file’s url to share in public space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attachment</strong> – The <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a> object to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.Store.open">
<code class="descname">open</code><span class="sig-paren">(</span><em>filename: str</em>, <em>mode: str = 'rb'</em><span class="sig-paren">)</span> &#x2192; Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]<a class="reference internal" href="_modules/sqlalchemy_media/stores/base.html#Store.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.Store.open" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and return a file-like object representing the file in the store.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Caller of this method is responsible to close the file-like object.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – The filename to open.</li>
<li><strong>mode</strong> – same as the <cite>mode</cite> in famous <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#open" title="(in Python v3.5)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.Store.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>filename: str, stream: Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/sqlalchemy_media/stores/base.html#Store.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.Store.put" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and puts the file-like object as the given filename in the store.</p>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">min_length</span></code> has been removed.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">max_length</span></code> has been removed.</p>
</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – the target filename.</li>
<li><strong>stream</strong> – the source file-like object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">length of the stored file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="filesystemstore">
<h3>FileSystemStore<a class="headerlink" href="#filesystemstore" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.stores.FileSystemStore">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.stores.</code><code class="descname">FileSystemStore</code><span class="sig-paren">(</span><em>root_path: str</em>, <em>base_url: str</em>, <em>chunk_size: int = 32768</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/filesystem.html#FileSystemStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.FileSystemStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.stores.base.Store</span></code></p>
<p>Store for dealing with local file-system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>root_path</strong> – The path to a directory to store files.</li>
<li><strong>base_url</strong> – The base url path to include at the beginning of the file’s path to yield the access url.</li>
<li><strong>chunk_size</strong> – Length of the chunks to read/write from/to files. default: 32768</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sqlalchemy_media.stores.FileSystemStore.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>filename: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/filesystem.html#FileSystemStore.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.FileSystemStore.delete" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and deletes the given file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – The filename to delete</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.FileSystemStore.locate">
<code class="descname">locate</code><span class="sig-paren">(</span><em>attachment</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/sqlalchemy_media/stores/filesystem.html#FileSystemStore.locate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.FileSystemStore.locate" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>If overridden in the inherited class, should locates the file’s url to share in public space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attachment</strong> – The <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a> object to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.FileSystemStore.open">
<code class="descname">open</code><span class="sig-paren">(</span><em>filename: str</em>, <em>mode: str = 'rb'</em><span class="sig-paren">)</span> &#x2192; Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]<a class="reference internal" href="_modules/sqlalchemy_media/stores/filesystem.html#FileSystemStore.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.FileSystemStore.open" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and return a file-like object representing the file in the store.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Caller of this method is responsible to close the file-like object.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – The filename to open.</li>
<li><strong>mode</strong> – same as the <cite>mode</cite> in famous <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#open" title="(in Python v3.5)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.FileSystemStore.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>filename: str, stream: Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/filesystem.html#FileSystemStore.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.FileSystemStore.put" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and puts the file-like object as the given filename in the store.</p>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">min_length</span></code> has been removed.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">max_length</span></code> has been removed.</p>
</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – the target filename.</li>
<li><strong>stream</strong> – the source file-like object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">length of the stored file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="s3store">
<h3>S3Store<a class="headerlink" href="#s3store" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.stores.S3Store">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.stores.</code><code class="descname">S3Store</code><span class="sig-paren">(</span><em>bucket: str</em>, <em>access_key: str</em>, <em>secret_key: str</em>, <em>region: str</em>, <em>max_age: int = 31536000</em>, <em>prefix: str = None</em>, <em>base_url: str = None</em>, <em>cdn_url: str = None</em>, <em>cdn_prefix_ignore: bool = False</em>, <em>acl: str = 'private'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/s3.html#S3Store"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.S3Store" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.stores.base.Store</span></code></p>
<p>Store for dealing with s3 of aws</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.0.</span></p>
</div>
<div class="versionadded">
<ul>
<span class="versionmodified">New in version 0.9.6: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">prefix</span></code></p>
</li>
</ul>
</div>
<dl class="method">
<dt id="sqlalchemy_media.stores.S3Store.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>filename: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/s3.html#S3Store.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.S3Store.delete" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and deletes the given file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – The filename to delete</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.S3Store.locate">
<code class="descname">locate</code><span class="sig-paren">(</span><em>attachment</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/sqlalchemy_media/stores/s3.html#S3Store.locate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.S3Store.locate" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>If overridden in the inherited class, should locates the file’s url to share in public space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attachment</strong> – The <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a> object to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.S3Store.open">
<code class="descname">open</code><span class="sig-paren">(</span><em>filename: str</em>, <em>mode: str = 'rb'</em><span class="sig-paren">)</span> &#x2192; Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]<a class="reference internal" href="_modules/sqlalchemy_media/stores/s3.html#S3Store.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.S3Store.open" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and return a file-like object representing the file in the store.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Caller of this method is responsible to close the file-like object.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – The filename to open.</li>
<li><strong>mode</strong> – same as the <cite>mode</cite> in famous <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#open" title="(in Python v3.5)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.S3Store.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>filename: str, stream: Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/s3.html#S3Store.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.S3Store.put" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and puts the file-like object as the given filename in the store.</p>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">min_length</span></code> has been removed.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">max_length</span></code> has been removed.</p>
</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – the target filename.</li>
<li><strong>stream</strong> – the source file-like object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">length of the stored file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="os2store">
<h3>OS2Store<a class="headerlink" href="#os2store" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.stores.OS2Store">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.stores.</code><code class="descname">OS2Store</code><span class="sig-paren">(</span><em>bucket: str</em>, <em>access_key: str</em>, <em>secret_key: str</em>, <em>region: str</em>, <em>max_age: int = 31536000</em>, <em>base_headers: dict = None</em>, <em>prefix: str = None</em>, <em>base_url: str = None</em>, <em>cdn_url: str = None</em>, <em>cdn_prefix_ignore: bool = False</em>, <em>acl: str = 'private'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/os2.html#OS2Store"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.OS2Store" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.stores.base.Store</span></code></p>
<p>Store for dealing with oss of aliyun</p>
<dl class="method">
<dt id="sqlalchemy_media.stores.OS2Store.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>filename: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/os2.html#OS2Store.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.OS2Store.delete" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and deletes the given file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – The filename to delete</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.OS2Store.locate">
<code class="descname">locate</code><span class="sig-paren">(</span><em>attachment</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/sqlalchemy_media/stores/os2.html#OS2Store.locate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.OS2Store.locate" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>If overridden in the inherited class, should locates the file’s url to share in public space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attachment</strong> – The <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a> object to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.OS2Store.open">
<code class="descname">open</code><span class="sig-paren">(</span><em>filename: str</em>, <em>mode: str = 'rb'</em><span class="sig-paren">)</span> &#x2192; Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]<a class="reference internal" href="_modules/sqlalchemy_media/stores/os2.html#OS2Store.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.OS2Store.open" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and return a file-like object representing the file in the store.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Caller of this method is responsible to close the file-like object.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – The filename to open.</li>
<li><strong>mode</strong> – same as the <cite>mode</cite> in famous <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#open" title="(in Python v3.5)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.OS2Store.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>filename: str, stream: Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/os2.html#OS2Store.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.OS2Store.put" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and puts the file-like object as the given filename in the store.</p>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">min_length</span></code> has been removed.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">max_length</span></code> has been removed.</p>
</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – the target filename.</li>
<li><strong>stream</strong> – the source file-like object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">length of the stored file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sshstore">
<h3>SSHStore<a class="headerlink" href="#sshstore" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.stores.SSHStore">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.stores.</code><code class="descname">SSHStore</code><span class="sig-paren">(</span><em>hostname</em>, <em>root_path</em>, <em>base_url</em>, <em>ssh_config_file=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/ssh.html#SSHStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.SSHStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.stores.base.Store</span></code></p>
<p>Store for SSH protocol. aka SFTP</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.12.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>hostname</strong> – The ssh server’s hostname to connect to. It will be looked-up from ssh config file to find
another options if given.
An instance of the <code class="xref py py-class docutils literal notranslate"><span class="pre">paramiko.SSHClient</span></code> may be passed instead of the hostname.</li>
<li><strong>root_path</strong> – The path to a directory on the ssh server to store files.</li>
<li><strong>base_url</strong> – The base url path to include at the beginning of the file’s path to yield the access url.</li>
<li><strong>ssh_config_file</strong> – The standard ssh config file. is not given, the file <cite>$HOME/.ssh/config</cite> will be tried.</li>
<li><strong>kwargs</strong> – Additional keyword arguments to pass to the <code class="xref py py-class docutils literal notranslate"><span class="pre">paramiko.SSHClient</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sqlalchemy_media.stores.SSHStore.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>filename: str</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores/ssh.html#SSHStore.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.SSHStore.delete" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and deletes the given file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – The filename to delete</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.SSHStore.locate">
<code class="descname">locate</code><span class="sig-paren">(</span><em>attachment</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/sqlalchemy_media/stores/ssh.html#SSHStore.locate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.SSHStore.locate" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>If overridden in the inherited class, should locates the file’s url to share in public space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attachment</strong> – The <a class="reference internal" href="#sqlalchemy_media.attachments.Attachment" title="sqlalchemy_media.attachments.Attachment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code></a> object to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.SSHStore.open">
<code class="descname">open</code><span class="sig-paren">(</span><em>filename: str</em>, <em>mode: str = 'rb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores/ssh.html#SSHStore.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.SSHStore.open" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and return a file-like object representing the file in the store.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Caller of this method is responsible to close the file-like object.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – The filename to open.</li>
<li><strong>mode</strong> – same as the <cite>mode</cite> in famous <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#open" title="(in Python v3.5)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.SSHStore.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>filename: str, stream: Union[typing.IO[_io.BytesIO], _io.BytesIO, _io.FileIO, _io.TextIOWrapper]</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/sqlalchemy_media/stores/ssh.html#SSHStore.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.SSHStore.put" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and puts the file-like object as the given filename in the store.</p>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">min_length</span></code> has been removed.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">max_length</span></code> has been removed.</p>
</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – the target filename.</li>
<li><strong>stream</strong> – the source file-like object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">length of the stored file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="storemanager">
<h3>StoreManager<a class="headerlink" href="#storemanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.stores.StoreManager">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.stores.</code><code class="descname">StoreManager</code><span class="sig-paren">(</span><em>session</em>, <em>delete_orphan=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This is an context manager.</p>
<p>Before using you must register at least one store factory function as default with-in store registry with
<a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.register" title="sqlalchemy_media.stores.StoreManager.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> by passing <cite>default=true</cite> during registration.</p>
<p>This object will call the registered factory functions to instantiate one per
<code class="xref py py-func docutils literal notranslate"><span class="pre">sqlalchemy_media.context.get_id()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.orm.session</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="kn">from</span> <span class="nn">sqlalchemy_media</span> <span class="kn">import</span> <span class="n">StoreManager</span><span class="p">,</span> <span class="n">FileSystemStore</span>

<span class="n">StoreManager</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">,</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">FileSystemStore</span><span class="p">,</span> <span class="s1">&#39;/tmp/sa_temp_fs&#39;</span><span class="p">,</span> <span class="s1">&#39;http&#39;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">StoreManager</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;fs2&#39;</span><span class="p">,</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">FileSystemStore</span><span class="p">,</span> <span class="s1">&#39;/tmp/sa_temp_fs2&#39;</span><span class="p">,</span> <span class="s1">&#39;http&#39;</span><span class="p">))</span>

<span class="k">with</span> <span class="n">StoreManager</span><span class="p">(</span><span class="n">Session</span><span class="p">)</span> <span class="k">as</span> <span class="n">store_manager</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">StoreManager</span><span class="o">.</span><span class="n">get_current_store_manager</span><span class="p">()</span> <span class="o">==</span> <span class="n">store_manager</span>

    <span class="k">print</span><span class="p">(</span><span class="n">store_manager</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">root_path</span><span class="p">)</span>  <span class="c1"># fs1 default store</span>
    <span class="k">print</span><span class="p">(</span><span class="n">store_manager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fs2&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">root_path</span><span class="p">)</span>  <span class="c1"># fs2 store</span>
</pre></div>
</div>
<p>This would output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/tmp/sa_temp_fs
/tmp/sa_temp_fs2
</pre></div>
</div>
<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.__enter__">
<code class="descname">__enter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.__enter__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.__enter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Enters the context: bind events and push itself into context stack.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.__exit__">
<code class="descname">__exit__</code><span class="sig-paren">(</span><em>exc_type</em>, <em>exc_val</em>, <em>exc_tb</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.__exit__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.__exit__" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy the context, pop itself from context stack and unbind all events.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.adopted">
<code class="descname">adopted</code><span class="sig-paren">(</span><em>*attachments</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.adopted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.adopted" title="Permalink to this definition">¶</a></dt>
<dd><p>Opposite of <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.orphaned" title="sqlalchemy_media.stores.StoreManager.orphaned"><code class="xref py py-meth docutils literal notranslate"><span class="pre">orphaned()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.bind_events">
<code class="descname">bind_events</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.bind_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.bind_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Binds the required event on sqlalchemy session. to handle commit &amp; rollback.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.cleanup">
<code class="descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the <a class="reference internal" href="#sqlalchemy_media.stores.Store.cleanup" title="sqlalchemy_media.stores.Store.cleanup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Store.cleanup()</span></code></a> for each store is <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.stores" title="sqlalchemy_media.stores.StoreManager.stores"><code class="xref py py-attr docutils literal notranslate"><span class="pre">stores</span></code></a> and clears the <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.stores" title="sqlalchemy_media.stores.StoreManager.stores"><code class="xref py py-attr docutils literal notranslate"><span class="pre">stores</span></code></a> also.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.stores.StoreManager.default_store">
<code class="descname">default_store</code><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.default_store" title="Permalink to this definition">¶</a></dt>
<dd><p>The same as the <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.get" title="sqlalchemy_media.stores.StoreManager.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> without parameter.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.stores.StoreManager.delete_orphan">
<code class="descname">delete_orphan</code><em class="property"> = False</em><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.delete_orphan" title="Permalink to this definition">¶</a></dt>
<dd><p>If <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> the orphaned attachments will be gathered and deleted after session commit.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key=None</em><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.stores.base.Store<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup the store in available instance cache, and instantiate a new one using registered factory function,
if not found.</p>
<p>If the key is <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a>, the default store will be instantiated(if required) and returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> – the store unique id to lookup.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.stores.StoreManager.get_current_store_manager">
<em class="property">classmethod </em><code class="descname">get_current_store_manager</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.stores.StoreManager<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.get_current_store_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.get_current_store_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the current <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager" title="sqlalchemy_media.stores.StoreManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoreManager</span></code></a> in context stack if any. else <a class="reference internal" href="#sqlalchemy_media.exceptions.ContextError" title="sqlalchemy_media.exceptions.ContextError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ContextError</span></code></a> will be raised.</p>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.stores.StoreManager.make_default">
<em class="property">classmethod </em><code class="descname">make_default</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.make_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.make_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a pre-registered store as default.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> – the store id.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.stores.StoreManager.observe_attribute">
<em class="property">classmethod </em><code class="descname">observe_attribute</code><span class="sig-paren">(</span><em>attr</em>, <em>collection=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.observe_attribute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.observe_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach some event handlers on sqlalchemy attribute to handle delete_orphan option.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.on_commit">
<code class="descname">on_commit</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.on_commit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.on_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Will be called when session commit occurred.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.on_delete">
<code class="descname">on_delete</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.on_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.on_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Will be called when an model instance deleted.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.on_rollback">
<code class="descname">on_rollback</code><span class="sig-paren">(</span><em>session</em>, <em>transaction</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.on_rollback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.on_rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Will be called when session rollback occurred.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.orphaned">
<code class="descname">orphaned</code><span class="sig-paren">(</span><em>*attachments</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.orphaned"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.orphaned" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark one or more attachment(s) orphaned, So if <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.delete_orphan" title="sqlalchemy_media.stores.StoreManager.delete_orphan"><code class="xref py py-attr docutils literal notranslate"><span class="pre">delete_orphan</span></code></a> is <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, the attachment(s) will
be deleted from store after session commit.</p>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.stores.StoreManager.register">
<em class="property">classmethod </em><code class="descname">register</code><span class="sig-paren">(</span><em>key: str</em>, <em>store_factory</em>, <em>default: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers the store factory into stores registry, use <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.unregister" title="sqlalchemy_media.stores.StoreManager.unregister"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unregister()</span></code></a> to remove it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> – The unique key for store.</li>
<li><strong>store_factory</strong> – A callable that returns an instance of <a class="reference internal" href="#sqlalchemy_media.stores.Store" title="sqlalchemy_media.stores.Store"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store</span></code></a>.</li>
<li><strong>default</strong> – If <a class="reference external" href="https://docs.python.org/3.5/library/constants.html#True" title="(in Python v3.5)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> the given store will be marked as default also. in addition you can use
<a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.make_default" title="sqlalchemy_media.stores.StoreManager.make_default"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make_default()</span></code></a> to mark a store as default.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.register_to_delete_after_commit">
<code class="descname">register_to_delete_after_commit</code><span class="sig-paren">(</span><em>*attachments</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.register_to_delete_after_commit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.register_to_delete_after_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedules one or more attachment(s) to be deleted from store just after sqlalchemy session commit.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.register_to_delete_after_rollback">
<code class="descname">register_to_delete_after_rollback</code><span class="sig-paren">(</span><em>*files</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.register_to_delete_after_rollback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.register_to_delete_after_rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedules one or more attachment(s) to be deleted from store just after sqlalchemy session rollback.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.reset_files_state">
<code class="descname">reset_files_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.reset_files_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.reset_files_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the object’s state and forget all scheduled tasks for commit and or rollback.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Calling this method without knowing what you are doing, will be caused bad result !</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy_media.stores.StoreManager.stores">
<code class="descname">stores</code><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.stores" title="Permalink to this definition">¶</a></dt>
<dd><p>The mapping <cite>str -&gt; store factory</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict[str] -&gt; callable</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy_media.stores.StoreManager.unbind_events">
<code class="descname">unbind_events</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.unbind_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.unbind_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Opposite of <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.bind_events" title="sqlalchemy_media.stores.StoreManager.bind_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bind_events()</span></code></a>.</p>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy_media.stores.StoreManager.unregister">
<em class="property">classmethod </em><code class="descname">unregister</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span> &#x2192; sqlalchemy_media.stores.base.Store<a class="reference internal" href="_modules/sqlalchemy_media/stores.html#StoreManager.unregister"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.stores.StoreManager.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Opposite of <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.register" title="sqlalchemy_media.stores.StoreManager.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a>. <a class="reference external" href="https://docs.python.org/3.5/library/exceptions.html#KeyError" title="(in Python v3.5)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> may raised if key not found in registry.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> – The store key to remove from stores registry.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-sqlalchemy_media.processors">
<span id="processors-module"></span><h2>processors Module<a class="headerlink" href="#module-sqlalchemy_media.processors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="processor">
<h3>Processor<a class="headerlink" href="#processor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.processors.Processor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.processors.</code><code class="descname">Processor</code><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#Processor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.Processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
<p>Abstract base class for all processors.</p>
<p>Processors are used to modify/replace the attachment before storing.</p>
<dl class="method">
<dt id="sqlalchemy_media.processors.Processor.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>descriptor: sqlalchemy_media.descriptors.StreamDescriptor</em>, <em>context: dict</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/processors.html#Processor.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.Processor.process" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and apply the process on the file-like object. the result may be
inserted info <code class="docutils literal notranslate"><span class="pre">context</span></code> argument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>descriptor</strong> – The <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> instance, to read the blob info from.</li>
<li><strong>context</strong> – A dictionary to put and get the info about the attachment. which as <code class="docutils literal notranslate"><span class="pre">content_type</span></code>, <code class="docutils literal notranslate"><span class="pre">width</span></code>,
<code class="docutils literal notranslate"><span class="pre">height</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code> and etc …</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="analyzer">
<h3>Analyzer<a class="headerlink" href="#analyzer" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.processors.Analyzer">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.processors.</code><code class="descname">Analyzer</code><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#Analyzer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.Analyzer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.processors.Processor" title="sqlalchemy_media.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.processors.Processor</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.</span></p>
</div>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first">Inherited from <a class="reference internal" href="#sqlalchemy_media.processors.Processor" title="sqlalchemy_media.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Processor</span></code></a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">analyze</span></code> method renamed to <code class="docutils literal notranslate"><span class="pre">process</span></code> to override the parent method.</p>
</li>
</ul>
</div>
<p>The abstract base class for all analyzers.</p>
<dl class="method">
<dt id="sqlalchemy_media.processors.Analyzer.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>descriptor: sqlalchemy_media.descriptors.StreamDescriptor</em>, <em>context: dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#Analyzer.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.Analyzer.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be overridden in inherited class and analyzes the given <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> instance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An instance of <a class="reference internal" href="#sqlalchemy_media.exceptions.AnalyzeError" title="sqlalchemy_media.exceptions.AnalyzeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AnalyzeError</span></code></a> or sub-types may raised</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="magicanalyzer">
<h3>MagicAnalyzer<a class="headerlink" href="#magicanalyzer" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.processors.MagicAnalyzer">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.processors.</code><code class="descname">MagicAnalyzer</code><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#MagicAnalyzer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.MagicAnalyzer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.processors.Analyzer" title="sqlalchemy_media.processors.Analyzer"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.processors.Analyzer</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.</span></p>
</div>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first">Inherited from <a class="reference internal" href="#sqlalchemy_media.processors.Processor" title="sqlalchemy_media.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Processor</span></code></a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">analyze</span></code> method renamed to <code class="docutils literal notranslate"><span class="pre">process</span></code> to override the parent method.</p>
</li>
</ul>
</div>
<p>Analyze the file using the libmagic and it’s Python wrapper: <code class="docutils literal notranslate"><span class="pre">python-magic</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You should install the <code class="docutils literal notranslate"><span class="pre">python-magic</span></code> in order, to use this class. otherwise, an
<a class="reference internal" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="sqlalchemy_media.exceptions.OptionalPackageRequirementError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OptionalPackageRequirementError</span></code></a> will be raised.</p>
</div>
<dl class="method">
<dt id="sqlalchemy_media.processors.MagicAnalyzer.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>descriptor: sqlalchemy_media.descriptors.StreamDescriptor</em>, <em>context: dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#MagicAnalyzer.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.MagicAnalyzer.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be overridden in inherited class and analyzes the given <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> instance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An instance of <a class="reference internal" href="#sqlalchemy_media.exceptions.AnalyzeError" title="sqlalchemy_media.exceptions.AnalyzeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AnalyzeError</span></code></a> or sub-types may raised</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="wandanalyzer">
<h3>WandAnalyzer<a class="headerlink" href="#wandanalyzer" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.processors.WandAnalyzer">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.processors.</code><code class="descname">WandAnalyzer</code><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#WandAnalyzer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.WandAnalyzer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.processors.Analyzer" title="sqlalchemy_media.processors.Analyzer"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.processors.Analyzer</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.4.</span></p>
</div>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first">Inherited from <a class="reference internal" href="#sqlalchemy_media.processors.Processor" title="sqlalchemy_media.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Processor</span></code></a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">analyze</span></code> method renamed to <code class="docutils literal notranslate"><span class="pre">process</span></code> to override the parent method.</p>
</li>
</ul>
</div>
<p>Analyze an image using <code class="docutils literal notranslate"><span class="pre">wand</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Installing <code class="docutils literal notranslate"><span class="pre">wand</span></code> is required for using this class. otherwise, an
<a class="reference internal" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="sqlalchemy_media.exceptions.OptionalPackageRequirementError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OptionalPackageRequirementError</span></code></a> will be raised.</p>
</div>
<p>Use it as follow</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">TypeDecorator</span><span class="p">,</span> <span class="n">Unicode</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">JSONB</span>

<span class="kn">from</span> <span class="nn">sqlalchemy_media</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">WandAnalyzer</span>


<span class="k">class</span> <span class="nc">ProfileImage</span><span class="p">(</span><span class="n">Image</span><span class="p">):</span>
   <span class="n">__pre_processors__</span> <span class="o">=</span> <span class="n">WandAnalyzer</span><span class="p">()</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Member</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;person&#39;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">avatar</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">ProfileImage</span><span class="o">.</span><span class="n">as_mutable</span><span class="p">(</span><span class="n">JSONB</span><span class="p">))</span>
</pre></div>
</div>
<p>The use it inside <code class="xref py py-class docutils literal notranslate"><span class="pre">ContextManager</span></code> context:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy_media</span> <span class="k">import</span> <span class="n">ContextManager</span>

<span class="n">session</span> <span class="o">=</span> <span class="o">&lt;....&gt;</span>

<span class="k">with</span> <span class="n">ContextManager</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
    <span class="n">me</span> <span class="o">=</span> <span class="n">Member</span><span class="p">(</span><span class="n">avatar</span><span class="o">=</span><span class="n">ProfileImage</span><span class="o">.</span><span class="n">create_from</span><span class="p">(</span><span class="s1">&#39;donkey.jpg&#39;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">me</span><span class="o">.</span><span class="n">avatar</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">me</span><span class="o">.</span><span class="n">avatar</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">me</span><span class="o">.</span><span class="n">avatar</span><span class="o">.</span><span class="n">content_type</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This object currently selects <code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code> and <code class="docutils literal notranslate"><span class="pre">mimetype</span></code> of the image.</p>
</div>
<dl class="method">
<dt id="sqlalchemy_media.processors.WandAnalyzer.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>descriptor: sqlalchemy_media.descriptors.StreamDescriptor</em>, <em>context: dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#WandAnalyzer.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.WandAnalyzer.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be overridden in inherited class and analyzes the given <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> instance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An instance of <a class="reference internal" href="#sqlalchemy_media.exceptions.AnalyzeError" title="sqlalchemy_media.exceptions.AnalyzeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AnalyzeError</span></code></a> or sub-types may raised</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="validator">
<h3>Validator<a class="headerlink" href="#validator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.processors.Validator">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.processors.</code><code class="descname">Validator</code><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#Validator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.Validator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.processors.Processor" title="sqlalchemy_media.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.processors.Processor</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.</span></p>
</div>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first">Inherited from <a class="reference internal" href="#sqlalchemy_media.processors.Processor" title="sqlalchemy_media.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Processor</span></code></a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">validate</span></code> method renamed to <code class="docutils literal notranslate"><span class="pre">process</span></code> to override the parent method.</p>
</li>
</ul>
</div>
<p>The abstract base class for all validators.</p>
<dl class="method">
<dt id="sqlalchemy_media.processors.Validator.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>descriptor: sqlalchemy_media.descriptors.StreamDescriptor</em>, <em>context: dict</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/processors.html#Validator.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.Validator.process" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and validate the validate the <code class="docutils literal notranslate"><span class="pre">context</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It should be appended after the <a class="reference internal" href="#sqlalchemy_media.processors.Analyzer" title="sqlalchemy_media.processors.Analyzer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Analyzer</span></code></a> to the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Attachment.__pre_processors__</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An instance of <a class="reference internal" href="#sqlalchemy_media.exceptions.ValidationError" title="sqlalchemy_media.exceptions.ValidationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValidationError</span></code></a> or sub-types may raised</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>descriptor</strong> – The <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> instance, to read the blob info from.</li>
<li><strong>context</strong> – A dictionary to to validate.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="contenttypevalidator">
<h3>ContentTypeValidator<a class="headerlink" href="#contenttypevalidator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.processors.ContentTypeValidator">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.processors.</code><code class="descname">ContentTypeValidator</code><span class="sig-paren">(</span><em>content_types: Iterable[str] = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#ContentTypeValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.ContentTypeValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.processors.Validator" title="sqlalchemy_media.processors.Validator"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.processors.Validator</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.</span></p>
</div>
<p>Assert content types.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>content_types</strong> – An iterable whose items are allowed content types.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.ContentTypeValidationError" title="sqlalchemy_media.exceptions.ContentTypeValidationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ContentTypeValidationError</span></code></a> may be raised during validation.</p>
</div>
<dl class="method">
<dt id="sqlalchemy_media.processors.ContentTypeValidator.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>descriptor: sqlalchemy_media.descriptors.StreamDescriptor</em>, <em>context: dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#ContentTypeValidator.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.ContentTypeValidator.process" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and validate the validate the <code class="docutils literal notranslate"><span class="pre">context</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It should be appended after the <a class="reference internal" href="#sqlalchemy_media.processors.Analyzer" title="sqlalchemy_media.processors.Analyzer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Analyzer</span></code></a> to the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Attachment.__pre_processors__</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An instance of <a class="reference internal" href="#sqlalchemy_media.exceptions.ValidationError" title="sqlalchemy_media.exceptions.ValidationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValidationError</span></code></a> or sub-types may raised</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>descriptor</strong> – The <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> instance, to read the blob info from.</li>
<li><strong>context</strong> – A dictionary to to validate.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="imagevalidator">
<h3>ImageValidator<a class="headerlink" href="#imagevalidator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.processors.ImageValidator">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.processors.</code><code class="descname">ImageValidator</code><span class="sig-paren">(</span><em>minimum: Tuple[int</em>, <em>int] = None</em>, <em>maximum: Tuple[int</em>, <em>int] = None</em>, <em>content_types=None</em>, <em>min_aspect_ratio: float = None</em>, <em>max_aspect_ratio: float = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#ImageValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.ImageValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.processors.ContentTypeValidator" title="sqlalchemy_media.processors.ContentTypeValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.processors.ContentTypeValidator</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.4.</span></p>
</div>
<div class="versionchanged">
<ul>
<span class="versionmodified">Changed in version 0.5: </span><li><p class="first">Renamed from <code class="docutils literal notranslate"><span class="pre">ImageDimensionValidator</span></code> to <code class="docutils literal notranslate"><span class="pre">ImageValidator</span></code>.</p>
</li>
</ul>
</div>
<p>Validates image size</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>minimum</strong> – Minimum allowed dimension (w, h).</li>
<li><strong>maximum</strong> – Maximum allowed dimension (w, h).</li>
<li><strong>content_types</strong> – An iterable whose items are allowed content types.</li>
<li><strong>min_aspect_ratio</strong> – Minimum allowed image aspect ratio.</li>
<li><strong>max_aspect_ratio</strong> – Maximum allowed image aspect ratio.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<ul>
<span class="versionmodified">New in version 0.6: </span><li><p class="first"><code class="docutils literal notranslate"><span class="pre">min_aspect_ratio</span></code> and <code class="docutils literal notranslate"><span class="pre">max_aspect_ratio</span></code></p>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Pass <code class="docutils literal notranslate"><span class="pre">0</span></code> on <code class="docutils literal notranslate"><span class="pre">None</span></code> for disabling assertion for one of: <code class="docutils literal notranslate"><span class="pre">(w,</span> <span class="pre">h)</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.DimensionValidationError" title="sqlalchemy_media.exceptions.DimensionValidationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DimensionValidationError</span></code></a> may be raised during validation.</p>
</div>
<p>Use it as follow</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy_media</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">WandAnalyzer</span><span class="p">,</span> <span class="n">ImageValidator</span>


<span class="k">class</span> <span class="nc">ProfileImage</span><span class="p">(</span><span class="n">Image</span><span class="p">):</span>
    <span class="n">__pre_processors__</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">WandAnalyzer</span><span class="p">(),</span>
        <span class="n">ImageValidator</span><span class="p">((</span><span class="mi">64</span><span class="p">,</span> <span class="mi">48</span><span class="p">),</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">96</span><span class="p">),</span> <span class="n">content_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span> <span class="s1">&#39;image/png&#39;</span><span class="p">])</span>
    <span class="p">]</span>
</pre></div>
</div>
<dl class="method">
<dt id="sqlalchemy_media.processors.ImageValidator.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>descriptor: sqlalchemy_media.descriptors.StreamDescriptor</em>, <em>context: dict</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/sqlalchemy_media/processors.html#ImageValidator.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.ImageValidator.process" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and validate the validate the <code class="docutils literal notranslate"><span class="pre">context</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It should be appended after the <a class="reference internal" href="#sqlalchemy_media.processors.Analyzer" title="sqlalchemy_media.processors.Analyzer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Analyzer</span></code></a> to the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Attachment.__pre_processors__</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An instance of <a class="reference internal" href="#sqlalchemy_media.exceptions.ValidationError" title="sqlalchemy_media.exceptions.ValidationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValidationError</span></code></a> or sub-types may raised</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>descriptor</strong> – The <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> instance, to read the blob info from.</li>
<li><strong>context</strong> – A dictionary to to validate.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="imageprocessor">
<h3>ImageProcessor<a class="headerlink" href="#imageprocessor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sqlalchemy_media.processors.ImageProcessor">
<em class="property">class </em><code class="descclassname">sqlalchemy_media.processors.</code><code class="descname">ImageProcessor</code><span class="sig-paren">(</span><em>fmt: str = None</em>, <em>width: int = None</em>, <em>height: int = None</em>, <em>crop=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#ImageProcessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.ImageProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.processors.Processor" title="sqlalchemy_media.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.processors.Processor</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
<p>Used to re-sampling, resizing, reformatting bitmaps.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>If <code class="docutils literal notranslate"><span class="pre">width</span></code> or <code class="docutils literal notranslate"><span class="pre">height</span></code> is given with <code class="docutils literal notranslate"><span class="pre">crop</span></code>, Cropping will be processed after the resize.</li>
<li>If you pass both <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code>, aspect ratio may not be preserved.</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fmt</strong> – This argument will be directly passing to <code class="docutils literal notranslate"><span class="pre">wand</span></code>. so, for list of available choices, see:
<a class="reference external" href="http://www.imagemagick.org/script/formats.php">ImageMagic Documentation</a></li>
<li><strong>width</strong> – The new image width.</li>
<li><strong>height</strong> – The new image height.</li>
<li><strong>crop</strong> – <p>Used to crop the image.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.</span></p>
</div>
<p>The crop dimension as a dictionary containing the keys described
<a class="reference external" href="http://docs.wand-py.org/en/0.4.1/wand/image.html#wand.image.BaseImage.crop">here</a>.</p>
<p>Including you can
use percent <code class="docutils literal notranslate"><span class="pre">%</span></code> sing to automatically calculate the values from original image dimension:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ImageProcessor</span><span class="p">(</span><span class="n">crop</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;50%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;50%&#39;</span><span class="p">,</span> <span class="n">gravity</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">))</span>
<span class="n">ImageProcessor</span><span class="p">(</span><span class="n">crop</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;10%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;10%&#39;</span><span class="p">,</span> <span class="n">gravity</span><span class="o">=</span><span class="s1">&#39;south_east&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ImageProcessor</span><span class="p">(</span><span class="n">crop</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
   <span class="n">top</span><span class="o">=</span><span class="s1">&#39;10%&#39;</span><span class="p">,</span>
   <span class="n">bottom</span><span class="o">=</span><span class="s1">&#39;10%&#39;</span><span class="p">,</span>
   <span class="n">left</span><span class="o">=</span><span class="s1">&#39;10%&#39;</span><span class="p">,</span>
   <span class="n">right</span><span class="o">=</span><span class="s1">&#39;10%&#39;</span><span class="p">,</span>
   <span class="n">width</span><span class="o">=</span><span class="s1">&#39;80%&#39;</span><span class="p">,</span>
   <span class="n">height</span><span class="o">=</span><span class="s1">&#39;80%&#39;</span>
<span class="p">))</span>
</pre></div>
</div>
<p>Included from wand documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+--------------------------------------------------+</span>
<span class="o">|</span>              <span class="o">^</span>                         <span class="o">^</span>         <span class="o">|</span>
<span class="o">|</span>              <span class="o">|</span>                         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>             <span class="n">top</span>                        <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>              <span class="o">|</span>                         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>              <span class="n">v</span>                         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span> <span class="o">&lt;--</span> <span class="n">left</span> <span class="o">--&gt;</span> <span class="o">+-------------------+</span>  <span class="n">bottom</span>       <span class="o">|</span>
<span class="o">|</span>              <span class="o">|</span>             <span class="o">^</span>     <span class="o">|</span>     <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>              <span class="o">|</span> <span class="o">&lt;--</span> <span class="n">width</span> <span class="o">--|---&gt;</span> <span class="o">|</span>     <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>              <span class="o">|</span>           <span class="n">height</span>  <span class="o">|</span>     <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>              <span class="o">|</span>             <span class="o">|</span>     <span class="o">|</span>     <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>              <span class="o">|</span>             <span class="n">v</span>     <span class="o">|</span>     <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>              <span class="o">+-------------------+</span>     <span class="n">v</span>         <span class="o">|</span>
<span class="o">|</span> <span class="o">&lt;---------------</span> <span class="n">right</span> <span class="o">----------&gt;</span>               <span class="o">|</span>
<span class="o">+--------------------------------------------------+</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">crop</span></code> <a class="reference external" href="http://docs.wand-py.org/en/0.4.1/wand/image.html#wand.image.BaseImage.crop">method</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">gravity</span></code> <a class="reference external" href="http://docs.wand-py.org/en/0.4.1/wand/image.html#wand.image.GRAVITY_TYPES">argument</a>.</li>
<li><a class="reference external" href="http://docs.wand-py.org/">Wand</a></li>
</ul>
</div>
<dl class="method">
<dt id="sqlalchemy_media.processors.ImageProcessor.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>descriptor: sqlalchemy_media.descriptors.StreamDescriptor</em>, <em>context: dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/processors.html#ImageProcessor.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.processors.ImageProcessor.process" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[Abstract]</strong></p>
<p>Should be overridden in inherited class and apply the process on the file-like object. the result may be
inserted info <code class="docutils literal notranslate"><span class="pre">context</span></code> argument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>descriptor</strong> – The <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> instance, to read the blob info from.</li>
<li><strong>context</strong> – A dictionary to put and get the info about the attachment. which as <code class="docutils literal notranslate"><span class="pre">content_type</span></code>, <code class="docutils literal notranslate"><span class="pre">width</span></code>,
<code class="docutils literal notranslate"><span class="pre">height</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code> and etc …</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-sqlalchemy_media.exceptions">
<span id="exceptions-module"></span><h2>exceptions Module<a class="headerlink" href="#module-sqlalchemy_media.exceptions" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="sqlalchemy_media.exceptions.SqlAlchemyMediaException">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">SqlAlchemyMediaException</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#SqlAlchemyMediaException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/exceptions.html#Exception" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>The base class for all exceptions</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.MaximumLengthIsReachedError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">MaximumLengthIsReachedError</code><span class="sig-paren">(</span><em>max_length: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#MaximumLengthIsReachedError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.MaximumLengthIsReachedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>Indicates the maximum allowed file limit is reached.</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.MinimumLengthIsNotReachedError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">MinimumLengthIsNotReachedError</code><span class="sig-paren">(</span><em>min_length</em>, <em>length=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#MinimumLengthIsNotReachedError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.MinimumLengthIsNotReachedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>Indicates the minimum allowed length is not .</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.ContextError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">ContextError</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#ContextError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.ContextError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>Exception related to <a class="reference internal" href="#sqlalchemy_media.stores.StoreManager" title="sqlalchemy_media.stores.StoreManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoreManager</span></code></a>.</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.DefaultStoreError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">DefaultStoreError</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#DefaultStoreError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.DefaultStoreError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>Raised when no default store is registered.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.stores.StoreManager.register" title="sqlalchemy_media.stores.StoreManager.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StoreManager.register()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.AnalyzeError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">AnalyzeError</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#AnalyzeError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.AnalyzeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>Raised when <a class="reference internal" href="#sqlalchemy_media.processors.Analyzer" title="sqlalchemy_media.processors.Analyzer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Analyzer</span></code></a> can not analyze the file-like object.</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.ValidationError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">ValidationError</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#ValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.ValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>Raised when <a class="reference internal" href="#sqlalchemy_media.processors.Validator" title="sqlalchemy_media.processors.Validator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Validator</span></code></a> can not validate the file-like object.</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.DescriptorOperationError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">DescriptorOperationError</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#DescriptorOperationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.DescriptorOperationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.DescriptorError" title="sqlalchemy_media.exceptions.DescriptorError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.DescriptorError</span></code></a></p>
<p>Raised when a subclass of <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> is abused.</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.DescriptorError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">DescriptorError</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#DescriptorError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.DescriptorError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>A sub-class instance of this exception may raised when an error has occurred in <a class="reference internal" href="#sqlalchemy_media.descriptors.BaseDescriptor" title="sqlalchemy_media.descriptors.BaseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDescriptor</span></code></a> and
it’s subtypes.</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.OptionalPackageRequirementError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">OptionalPackageRequirementError</code><span class="sig-paren">(</span><em>package_name: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#OptionalPackageRequirementError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>Raised when an optional package is missing.
The constructor is trying to search for package name in requirements-optional.txt and find the requirement and
it’s version criteria to inform the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>package_name</strong> – The name of the missing package.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.ContentTypeValidationError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">ContentTypeValidationError</code><span class="sig-paren">(</span><em>content_type=None</em>, <em>valid_content_types=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#ContentTypeValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.ContentTypeValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.ValidationError" title="sqlalchemy_media.exceptions.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.ValidationError</span></code></a></p>
<p>Raised by <code class="xref py py-meth docutils literal notranslate"><span class="pre">Validator.validate()</span></code> when the content type is missing or invalid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>content_type</strong> – The invalid content type if any.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.ThumbnailIsNotAvailableError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">ThumbnailIsNotAvailableError</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#ThumbnailIsNotAvailableError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.ThumbnailIsNotAvailableError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.SqlAlchemyMediaException" title="sqlalchemy_media.exceptions.SqlAlchemyMediaException"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.SqlAlchemyMediaException</span></code></a></p>
<p>Raised when requested thumbnail is not available(generated) yet.</p>
</dd></dl>

<dl class="exception">
<dt id="sqlalchemy_media.exceptions.DimensionValidationError">
<em class="property">exception </em><code class="descclassname">sqlalchemy_media.exceptions.</code><code class="descname">DimensionValidationError</code><a class="reference internal" href="_modules/sqlalchemy_media/exceptions.html#DimensionValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.exceptions.DimensionValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy_media.exceptions.ValidationError" title="sqlalchemy_media.exceptions.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy_media.exceptions.ValidationError</span></code></a></p>
<p>Raises when <code class="docutils literal notranslate"><span class="pre">width</span></code> or <code class="docutils literal notranslate"><span class="pre">height</span></code> of the media is not meet the limitations.</p>
</dd></dl>

</div>
<div class="section" id="module-sqlalchemy_media.mimetypes_">
<span id="other-modules"></span><h2>Other Modules<a class="headerlink" href="#module-sqlalchemy_media.mimetypes_" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mimetypes-module">
<h3>mimetypes_ Module<a class="headerlink" href="#mimetypes-module" title="Permalink to this headline">¶</a></h3>
<p>Due the python bugs:</p>
<ul class="simple">
<li><a class="reference external" href="https://bugs.python.org/issue4963">https://bugs.python.org/issue4963</a></li>
<li><a class="reference external" href="https://bugs.python.org/issue1043134">https://bugs.python.org/issue1043134</a></li>
<li><a class="reference external" href="https://bugs.python.org/issue6626#msg91205">https://bugs.python.org/issue6626#msg91205</a></li>
</ul>
<p>The database was hardcoded here.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.3.</span></p>
</div>
</div>
<span class="target" id="module-sqlalchemy_media.optionals"></span><div class="section" id="optionals-module">
<h3>optionals Module<a class="headerlink" href="#optionals-module" title="Permalink to this headline">¶</a></h3>
<p>This module is a helper for handing optional packages.</p>
<p>Optional packages are not included in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>. So <a class="reference internal" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="sqlalchemy_media.exceptions.OptionalPackageRequirementError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OptionalPackageRequirementError</span></code></a> will be raised if
requested package is not provided.</p>
<dl class="function">
<dt id="sqlalchemy_media.optionals.ensure_aws4auth">
<code class="descclassname">sqlalchemy_media.optionals.</code><code class="descname">ensure_aws4auth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/optionals.html#ensure_aws4auth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.optionals.ensure_aws4auth" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="sqlalchemy_media.exceptions.OptionalPackageRequirementError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OptionalPackageRequirementError</span></code></a> will be raised if <code class="docutils literal notranslate"><span class="pre">requests-aws4auth</span></code> is not installed.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy_media.optionals.ensure_os2auth">
<code class="descclassname">sqlalchemy_media.optionals.</code><code class="descname">ensure_os2auth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/optionals.html#ensure_os2auth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.optionals.ensure_os2auth" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="sqlalchemy_media.exceptions.OptionalPackageRequirementError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OptionalPackageRequirementError</span></code></a> will be raised if <code class="docutils literal notranslate"><span class="pre">requests-aliyun</span></code> is not installed.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy_media.optionals.ensure_paramiko">
<code class="descclassname">sqlalchemy_media.optionals.</code><code class="descname">ensure_paramiko</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/optionals.html#ensure_paramiko"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.optionals.ensure_paramiko" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="sqlalchemy_media.exceptions.OptionalPackageRequirementError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OptionalPackageRequirementError</span></code></a> will be raised if <code class="docutils literal notranslate"><span class="pre">paramiko</span></code> is not installed.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy_media.optionals.ensure_wand">
<code class="descclassname">sqlalchemy_media.optionals.</code><code class="descname">ensure_wand</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sqlalchemy_media/optionals.html#ensure_wand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.optionals.ensure_wand" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="sqlalchemy_media.exceptions.OptionalPackageRequirementError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OptionalPackageRequirementError</span></code></a> will be raised if <code class="docutils literal notranslate"><span class="pre">wand</span></code> is not installed.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy_media.optionals.magic_mime_from_buffer">
<code class="descclassname">sqlalchemy_media.optionals.</code><code class="descname">magic_mime_from_buffer</code><span class="sig-paren">(</span><em>buffer: bytes</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/sqlalchemy_media/optionals.html#magic_mime_from_buffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlalchemy_media.optionals.magic_mime_from_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to detect mimetype using <code class="docutils literal notranslate"><span class="pre">magic</span></code> library.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#sqlalchemy_media.exceptions.OptionalPackageRequirementError" title="sqlalchemy_media.exceptions.OptionalPackageRequirementError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OptionalPackageRequirementError</span></code></a> will be raised if <code class="docutils literal notranslate"><span class="pre">python-magic</span></code> is not installed.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>buffer</strong> – buffer from header of file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The mimetype</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-sqlalchemy_media.constants"></span><div class="section" id="constants-module">
<h3>constants Module<a class="headerlink" href="#constants-module" title="Permalink to this headline">¶</a></h3>
<dl class="data">
<dt id="sqlalchemy_media.constants.KB">
<code class="descclassname">sqlalchemy_media.constants.</code><code class="descname">KB</code><em class="property"> = 1024</em><a class="headerlink" href="#sqlalchemy_media.constants.KB" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents Kilo-Bytes</p>
</dd></dl>

<dl class="data">
<dt id="sqlalchemy_media.constants.MB">
<code class="descclassname">sqlalchemy_media.constants.</code><code class="descname">MB</code><em class="property"> = 1048576</em><a class="headerlink" href="#sqlalchemy_media.constants.MB" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents Mega-Bytes</p>
</dd></dl>

</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="tutorials/analyzers_and_validators.html" class="btn btn-neutral" title="Playing with Analyzers and Validators" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Vahid Mardani.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.15.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>